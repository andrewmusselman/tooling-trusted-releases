{% extends "layouts/base.html" %}

{% block title %}
  Email testing ~ ATR
{% endblock title %}

{% block description %}
  Test email sending functionality.
{% endblock description %}

{% block content %}
  <h1>Test email sending</h1>
  <p>
    Welcome, <strong>{{ asf_id }}</strong>! Use this form to test the email sending functionality.
  </p>

  {% if error %}
    <div class="alert alert-danger">
      <p class="mb-0">
        <strong>Error:</strong> {{ error }}
      </p>
    </div>
  {% endif %}

  {% if success %}
    <div class="alert alert-success">
      <p class="mb-0">
        <strong>Success!</strong>
        {% if message %}
          {{ message }}
        {% else %}
          Email was sent successfully.
        {% endif %}
      </p>
    </div>
  {% endif %}

  <form method="post" class="striking py-4 px-5">
    <div class="mb-3 pb-3 row border-bottom">
      <label for="email_recipient" class="col-sm-3 col-form-label text-sm-end">Recipient email:</label>
      <div class="col-sm-8">
        <input type="email"
               id="email_recipient"
               name="email_recipient"
               class="form-control"
               required
               value="{{ email_recipient or '' }}"
               placeholder="recipient@example.com"
               aria-describedby="email-help" />
        <code id="email-help" class="form-text text-muted d-block mt-2">Enter the email address to send the test email to</code>
      </div>
    </div>

    <div class="mb-3 pb-3 row border-bottom">
      <label for="artifact_name" class="col-sm-3 col-form-label text-sm-end">Artifact name:</label>
      <div class="col-sm-8">
        <input type="text"
               id="artifact_name"
               name="artifact_name"
               class="form-control"
               required
               value="{{ artifact_name or '' }}"
               placeholder="my-artifact-1.0.0"
               aria-describedby="artifact-help" />
        <code id="artifact-help" class="form-text text-muted d-block mt-2">Enter a name for the artifact</code>
      </div>
    </div>

    <div class="mb-3 pb-3 row border-bottom">
      <label for="token" class="col-sm-3 col-form-label text-sm-end">Token (optional):</label>
      <div class="col-sm-8">
        <input type="text"
               id="token"
               name="token"
               class="form-control"
               value="{{ token or '' }}"
               placeholder="Optional token"
               aria-describedby="token-help" />
        <code id="token-help" class="form-text text-muted d-block mt-2">Optional token to include in the email</code>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-9 offset-sm-3">
        <button type="submit" class="btn btn-primary mt-2">Send test email</button>
      </div>
    </div>
  </form>
{% endblock content %}
