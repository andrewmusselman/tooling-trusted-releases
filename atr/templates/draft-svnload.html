{% extends "layouts/base.html" %}

{% block title %}
  Import from SVN into {{ project_name }}-{{ version_name }} ~ ATR
{% endblock title %}

{% block description %}
  Import files from a Subversion repository into a candidate draft.
{% endblock description %}

{% block content %}
  <p>
    <a href="{{ as_url(routes.draft.evaluate, project_name=project_name, version_name=version_name) }}"
       class="back-link">‚Üê Back to Evaluate files</a>
  </p>
  <h1>Import from SVN into {{ project_name }}-{{ version_name }}</h1>
  <p class="intro">Import files from a publicly readable Subversion repository URL into this draft.</p>
  <p>
    The import will be processed in the background using the <code>svn export</code> command.
    You can monitor progress on the <em>Evaluate files</em> page for this draft once the task is queued.
  </p>

  <div class="row">
    <div class="col-md-8 w-100">
      <form method="post" novalidate class="atr-canary py-4 px-5">
        {{ form.hidden_tag() }}
        <div class="mb-3 pb-3 row border-bottom">
          <label for="{{ form.svn_url.id }}"
                 class="col-sm-3 col-form-label text-sm-end">{{ form.svn_url.label.text }}:</label>
          <div class="col-sm-9">
            {{ form.svn_url(class_="form-control") }}
            {% if form.svn_url.description %}<small class="form-text text-muted">{{ form.svn_url.description }}</small>{% endif %}
            {% if form.svn_url.errors -%}<div class="invalid-feedback d-block">{{ form.svn_url.errors[0] }}</div>{%- endif %}
          </div>
        </div>

        <div class="mb-3 pb-3 row border-bottom">
          <label for="{{ form.revision.id }}"
                 class="col-sm-3 col-form-label text-sm-end">{{ form.revision.label.text }}:</label>
          <div class="col-sm-9">
            {{ form.revision(class_="form-control") }}
            {% if form.revision.description %}
              <small class="form-text text-muted">{{ form.revision.description }}</small>
            {% endif %}
            {% if form.revision.errors -%}<div class="invalid-feedback d-block">{{ form.revision.errors[0] }}</div>{%- endif %}
          </div>
        </div>

        <div class="mb-3 pb-3 row border-bottom">
          <label for="{{ form.target_subdirectory.id }}"
                 class="col-sm-3 col-form-label text-sm-end">{{ form.target_subdirectory.label.text }}:</label>
          <div class="col-sm-9">
            {{ form.target_subdirectory(class_="form-control") }}
            {% if form.target_subdirectory.description %}
              <small class="form-text text-muted">{{ form.target_subdirectory.description }}</small>
            {% endif %}
            {% if form.target_subdirectory.errors -%}
              <div class="invalid-feedback d-block">{{ form.target_subdirectory.errors[0] }}</div>
            {%- endif %}
          </div>
        </div>

        <div class="row">
          <div class="col-sm-9 offset-sm-3">{{ form.submit(class_="btn btn-primary mt-3") }}</div>
        </div>
      </form>
    </div>
  </div>
{% endblock content %}
