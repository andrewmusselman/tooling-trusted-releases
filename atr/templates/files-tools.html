{% extends "layouts/base.html" %}

{% block title %}
  File tools ~ ATR
{% endblock title %}

{% block description %}
  Manage a file in the candidate draft using tools.
{% endblock description %}

{% block content %}
  <a href="{{ url_for('root_files_list', project_name=project_name, version_name=version_name) }}"
     class="back-link">‚Üê Back to Files List</a>

  <div class="p-3 mb-4 bg-light border rounded">
    <h2 class="mt-0">File details</h2>
    <p>
      <strong>Filename:</strong> {{ file_data.filename }}
    </p>
    <p>
      <strong>Size:</strong> {{ format_file_size(file_data.bytes_size) }}
    </p>
    <p class="mb-0">
      <strong>Uploaded:</strong> {{ file_data.uploaded.strftime("%Y-%m-%d %H:%M UTC") }}
    </p>
  </div>

  <h2>Tools</h2>
  <h3>Generate hash files</h3>
  <p>Generate an SHA256 or SHA512 hash file for this file.</p>
  <div class="alert alert-warning">
    <i class="fas fa-exclamation-triangle me-2"></i>IMPORTANT: The ASF security team <a href="https://infra.apache.org/release-signing.html#sha-checksum"
    class="alert-link">recommends using SHA512</a> as the hash algorithm.
    Please select SHA512 unless you have a specific reason to use SHA256.
  </div>
  <div class="d-flex gap-2 mb-4">
    <form method="post"
          action="{{ url_for('root_files_generate_hash', project_name=project_name, version_name=version_name, file_path=file_path) }}">
      <input type="hidden" name="hash_type" value="sha256" />
      <button type="submit" class="btn btn-outline-secondary">Generate SHA256</button>
    </form>
    <form method="post"
          action="{{ url_for('root_files_generate_hash', project_name=project_name, version_name=version_name, file_path=file_path) }}">
      <input type="hidden" name="hash_type" value="sha512" />
      <button type="submit" class="btn btn-outline-secondary">Generate SHA512</button>
    </form>
  </div>

  <h3>Delete file</h3>
  <p>This tool deletes the file from the candidate draft.</p>
  <form method="post"
        action="{{ url_for('root_files_delete', project_name=project_name, version_name=version_name, file_path=file_path) }}">
    <button type="submit"
            class="btn btn-danger"
            onclick="return confirm('Are you sure you want to delete this file?')">Delete file</button>
  </form>
{% endblock content %}
